<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test LG-120: Checklist de Accesibilidad WCAG 2.1 A/AA | Level-Up Gamer</title>
    <meta name="description" content="Validaci√≥n completa de cumplimiento WCAG 2.1 nivel A y AA para accesibilidad web">
    <link rel="stylesheet" href="assets/css/styles.css">
    <style>
        .accessibility-test {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            font-family: var(--font-primary);
        }
        
        .test-header {
            background: var(--gradient-primary);
            color: var(--color-primary);
            padding: 30px;
            border-radius: var(--border-radius-lg);
            margin-bottom: 30px;
            text-align: center;
        }
        
        .test-section {
            background: var(--color-surface);
            border: 1px solid var(--color-surface-variant);
            border-radius: var(--border-radius-md);
            padding: 25px;
            margin: 20px 0;
            box-shadow: var(--shadow-md);
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .criteria-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .criteria-card {
            background: var(--color-surface-variant);
            border-radius: var(--border-radius-md);
            padding: 20px;
            border-left: 4px solid var(--color-accent);
        }
        
        .criteria-card.passed {
            border-left-color: var(--color-success);
            background: rgba(0, 255, 65, 0.1);
        }
        
        .criteria-card.failed {
            border-left-color: var(--color-error);
            background: rgba(255, 7, 58, 0.1);
        }
        
        .criteria-card.warning {
            border-left-color: var(--color-warning);
            background: rgba(255, 215, 0, 0.1);
        }
        
        .score-display {
            background: var(--gradient-surface);
            border-radius: var(--border-radius-lg);
            padding: 30px;
            text-align: center;
            margin: 20px 0;
        }
        
        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 8px solid var(--color-surface-variant);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2rem;
            font-weight: bold;
            position: relative;
        }
        
        .score-circle.excellent {
            border-color: var(--color-success);
            color: var(--color-success);
        }
        
        .score-circle.good {
            border-color: var(--color-info);
            color: var(--color-info);
        }
        
        .score-circle.poor {
            border-color: var(--color-warning);
            color: var(--color-warning);
        }
        
        .score-circle.fail {
            border-color: var(--color-error);
            color: var(--color-error);
        }
        
        .test-button {
            background: var(--color-accent);
            color: var(--color-text-primary);
            border: none;
            padding: 12px 24px;
            border-radius: var(--border-radius-md);
            cursor: pointer;
            font-weight: 500;
            margin: 8px;
            min-height: 44px;
            transition: var(--transition-normal);
        }
        
        .test-button:hover,
        .test-button:focus {
            background: var(--color-secondary);
            color: var(--color-primary);
            outline: 2px solid var(--color-secondary);
            outline-offset: 2px;
        }
        
        .test-button.primary {
            background: var(--color-secondary);
            color: var(--color-primary);
        }
        
        .test-button.success {
            background: var(--color-success);
            color: var(--color-primary);
        }
        
        .test-button.warning {
            background: var(--color-warning);
            color: var(--color-primary);
        }
        
        .test-button.danger {
            background: var(--color-error);
        }
        
        .results-log {
            background: var(--color-primary);
            color: var(--color-secondary);
            border-radius: var(--border-radius-md);
            padding: 20px;
            font-family: var(--font-mono);
            font-size: 0.9rem;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            border: 1px solid var(--color-surface-variant);
        }
        
        .checklist {
            list-style: none;
            padding: 0;
        }
        
        .checklist li {
            padding: 10px;
            margin: 5px 0;
            border-radius: var(--border-radius-sm);
            background: var(--color-surface-variant);
            display: flex;
            align-items: center;
        }
        
        .checklist li.passed {
            background: rgba(0, 255, 65, 0.2);
            color: var(--color-success);
        }
        
        .checklist li.failed {
            background: rgba(255, 7, 58, 0.2);
            color: var(--color-error);
        }
        
        .checklist li.warning {
            background: rgba(255, 215, 0, 0.2);
            color: var(--color-warning);
        }
        
        .status-icon {
            margin-right: 10px;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .violation-demo {
            border: 2px dashed var(--color-warning);
            padding: 15px;
            margin: 10px 0;
            border-radius: var(--border-radius-md);
            background: rgba(255, 215, 0, 0.1);
        }
        
        .violation-demo.error {
            border-color: var(--color-error);
            background: rgba(255, 7, 58, 0.1);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: var(--color-surface-variant);
            padding: 20px;
            border-radius: var(--border-radius-md);
            text-align: center;
            border: 1px solid var(--color-accent);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--color-secondary);
            display: block;
        }
        
        .keyboard-demo {
            background: var(--color-surface);
            border: 2px solid var(--color-accent);
            border-radius: var(--border-radius-md);
            padding: 20px;
            margin: 15px 0;
        }
        
        .focus-demo {
            padding: 10px;
            margin: 5px;
            background: var(--color-surface-variant);
            border: 1px solid var(--color-accent);
            border-radius: var(--border-radius-sm);
            cursor: pointer;
        }
        
        .focus-demo:focus {
            outline: 3px solid var(--color-secondary);
            outline-offset: 2px;
            box-shadow: 0 0 0 5px rgba(57, 255, 20, 0.3);
        }
        
        @media (max-width: 768px) {
            .test-grid {
                grid-template-columns: 1fr;
            }
            
            .criteria-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Skip Navigation -->
    <a href="#main-content" class="skip-navigation sr-only-focusable">
        Saltar al contenido principal
    </a>

    <div class="accessibility-test">
        <header class="test-header" role="banner">
            <h1>üß™ Test LG-120: Checklist de Accesibilidad WCAG 2.1 A/AA</h1>
            <p>Sistema completo de validaci√≥n de cumplimiento de est√°ndares de accesibilidad web</p>
            
            <div class="score-display" id="scoreDisplay">
                <div class="score-circle" id="scoreCircle">
                    <span id="scoreValue">0%</span>
                </div>
                <h2>Puntuaci√≥n de Accesibilidad</h2>
                <p id="scoreDescription">Ejecuta la validaci√≥n para ver los resultados</p>
            </div>
        </header>

        <main id="main-content" role="main">
            <section class="test-section">
                <h2>üìã Controles de Validaci√≥n</h2>
                <div class="test-grid">
                    <div>
                        <h3>Validaciones Principales</h3>
                        <button class="test-button primary" onclick="runFullValidation()">
                            üîç Ejecutar Validaci√≥n Completa
                        </button>
                        <button class="test-button" onclick="runQuickScan()">
                            ‚ö° Escaneo R√°pido
                        </button>
                        <button class="test-button" onclick="validateSpecificCriteria()">
                            üéØ Criterios Espec√≠ficos
                        </button>
                        <button class="test-button" onclick="runKeyboardTest()">
                            ‚å®Ô∏è Test de Navegaci√≥n por Teclado
                        </button>
                    </div>
                    
                    <div>
                        <h3>Herramientas de Debug</h3>
                        <button class="test-button warning" onclick="toggleDebugMode()">
                            üîß Modo Debug
                        </button>
                        <button class="test-button" onclick="highlightAccessibilityIssues()">
                            üé® Resaltar Problemas
                        </button>
                        <button class="test-button" onclick="simulateScreenReader()">
                            üì¢ Simular Lector de Pantalla
                        </button>
                        <button class="test-button danger" onclick="clearResults()">
                            üóëÔ∏è Limpiar Resultados
                        </button>
                    </div>
                </div>
            </section>

            <section class="test-section">
                <h2>üìä Estad√≠sticas de Cumplimiento</h2>
                <div class="stats-grid" id="statsGrid">
                    <div class="stat-card">
                        <span class="stat-number" id="totalCriteria">15</span>
                        <span>Criterios Totales</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="passedCriteria">0</span>
                        <span>Aprobados</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="failedCriteria">0</span>
                        <span>Fallidos</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="warningCriteria">0</span>
                        <span>Advertencias</span>
                    </div>
                </div>
            </section>

            <div class="test-grid">
                <section class="test-section">
                    <h2>üéØ Criterios WCAG 2.1 Nivel A</h2>
                    <div class="criteria-grid" id="levelACriteria">
                        <!-- Criterios nivel A se generar√°n din√°micamente -->
                    </div>
                </section>

                <section class="test-section">
                    <h2>üéñÔ∏è Criterios WCAG 2.1 Nivel AA</h2>
                    <div class="criteria-grid" id="levelAACriteria">
                        <!-- Criterios nivel AA se generar√°n din√°micamente -->
                    </div>
                </section>
            </div>

            <section class="test-section">
                <h2>‚å®Ô∏è Test de Navegaci√≥n por Teclado</h2>
                <p>Usa la tecla Tab para navegar por los siguientes elementos:</p>
                <div class="keyboard-demo">
                    <button class="focus-demo" tabindex="1">Bot√≥n 1 (tabindex=1)</button>
                    <button class="focus-demo" tabindex="3">Bot√≥n 2 (tabindex=3)</button>
                    <button class="focus-demo" tabindex="2">Bot√≥n 3 (tabindex=2)</button>
                    <button class="focus-demo">Bot√≥n 4 (sin tabindex)</button>
                    <a href="#" class="focus-demo">Enlace demo</a>
                    <input type="text" class="focus-demo" placeholder="Campo de texto" />
                </div>
                <p><small>Orden esperado: Bot√≥n 1 ‚Üí Bot√≥n 3 ‚Üí Bot√≥n 2 ‚Üí Bot√≥n 4 ‚Üí Enlace ‚Üí Campo</small></p>
            </section>

            <section class="test-section">
                <h2>üö® Ejemplos de Violaciones (para testing)</h2>
                
                <div class="violation-demo">
                    <h3>Imagen sin texto alternativo</h3>
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzMzMyIvPjx0ZXh0IHg9IjUwIiB5PSI1NSIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+SU1BR0VOPC90ZXh0Pjwvc3ZnPg==" width="100" height="100">
                    <p>‚ö†Ô∏è Esta imagen no tiene atributo alt</p>
                </div>

                <div class="violation-demo">
                    <h3>Bot√≥n sin texto accesible</h3>
                    <button style="width: 44px; height: 44px; background: var(--color-accent);">‚ùå</button>
                    <p>‚ö†Ô∏è Este bot√≥n no tiene aria-label ni texto</p>
                </div>

                <div class="violation-demo">
                    <h3>Campo sin etiqueta</h3>
                    <input type="email" placeholder="Introduce tu email">
                    <p>‚ö†Ô∏è Este campo no tiene label asociado</p>
                </div>

                <div class="violation-demo error">
                    <h3>Contraste insuficiente</h3>
                    <p style="color: #ccc; background: #fff;">Texto con contraste pobre</p>
                    <p>‚ùå Este texto no cumple WCAG AA (4.5:1)</p>
                </div>
            </section>

            <section class="test-section">
                <h2>üìù Log de Resultados</h2>
                <button class="test-button" onclick="exportResults()">üìÑ Exportar Resultados</button>
                <button class="test-button" onclick="clearLog()">üóëÔ∏è Limpiar Log</button>
                <div class="results-log" id="resultsLog">
                    Esperando resultados de validaci√≥n...
                </div>
            </section>

            <section class="test-section">
                <h2>‚úÖ Checklist Manual</h2>
                <ul class="checklist" id="manualChecklist">
                    <li class="pending">
                        <span class="status-icon">‚è≥</span>
                        <span>Todas las im√°genes tienen texto alternativo apropiado</span>
                    </li>
                    <li class="pending">
                        <span class="status-icon">‚è≥</span>
                        <span>Contraste de color cumple WCAG AA (4.5:1 m√≠nimo)</span>
                    </li>
                    <li class="pending">
                        <span class="status-icon">‚è≥</span>
                        <span>Navegaci√≥n completamente accesible por teclado</span>
                    </li>
                    <li class="pending">
                        <span class="status-icon">‚è≥</span>
                        <span>Foco visible en todos los elementos interactivos</span>
                    </li>
                    <li class="pending">
                        <span class="status-icon">‚è≥</span>
                        <span>Formularios tienen etiquetas y validaci√≥n accesible</span>
                    </li>
                    <li class="pending">
                        <span class="status-icon">‚è≥</span>
                        <span>Estructura sem√°ntica correcta (headings, landmarks)</span>
                    </li>
                    <li class="pending">
                        <span class="status-icon">‚è≥</span>
                        <span>Skip links funcionan correctamente</span>
                    </li>
                    <li class="pending">
                        <span class="status-icon">‚è≥</span>
                        <span>Contenido din√°mico se anuncia correctamente</span>
                    </li>
                    <li class="pending">
                        <span class="status-icon">‚è≥</span>
                        <span>Elementos interactivos tienen tama√±o m√≠nimo 44px</span>
                    </li>
                    <li class="pending">
                        <span class="status-icon">‚è≥</span>
                        <span>P√°gina declara idioma correctamente</span>
                    </li>
                </ul>
            </section>
        </main>
    </div>

    <!-- Live regions para anuncios -->
    <div id="aria-live-polite" aria-live="polite" aria-atomic="true" class="sr-only"></div>
    <div id="aria-live-assertive" aria-live="assertive" aria-atomic="true" class="sr-only"></div>

    <!-- Scripts -->
    <script src="assets/js/accessibility.js"></script>
    <script>
        let validationResults = null;
        let logEntries = [];

        // Inicializaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            log('üöÄ Sistema de validaci√≥n de accesibilidad cargado');
            setupInitialDisplay();
            
            // Auto-validaci√≥n inicial
            setTimeout(runQuickScan, 1000);
        });

        // Funciones principales
        function runFullValidation() {
            log('üîç Ejecutando validaci√≥n completa WCAG 2.1 A/AA...');
            
            validationResults = window.accessibilityAPI.validate();
            updateDisplay(validationResults);
            updateManualChecklist();
            
            log(`‚úÖ Validaci√≥n completada: ${validationResults.score}% de cumplimiento`);
            
            // Anunciar resultado
            const level = validationResults.score >= 90 ? 'excelente' : 
                         validationResults.score >= 75 ? 'bueno' : 
                         validationResults.score >= 50 ? 'aceptable' : 'deficiente';
            
            window.accessibilityAPI.announce(
                `Validaci√≥n completada. Puntuaci√≥n ${level}: ${validationResults.score} por ciento`,
                'assertive'
            );
        }

        function runQuickScan() {
            log('‚ö° Ejecutando escaneo r√°pido...');
            
            // Validaciones b√°sicas r√°pidas
            const quickResults = {
                score: 0,
                level_A: [],
                level_AA: [],
                errors: [],
                warnings: [],
                passed: []
            };
            
            // Verificaciones b√°sicas
            const htmlLang = document.documentElement.getAttribute('lang');
            const images = document.querySelectorAll('img:not([alt])');
            const unlabeledInputs = document.querySelectorAll('input:not([aria-label]):not([aria-labelledby])');
            const skipLinks = document.querySelectorAll('.skip-navigation');
            
            let passed = 0;
            let total = 4;
            
            if (htmlLang) {
                quickResults.passed.push({ name: 'Idioma de p√°gina declarado' });
                passed++;
            } else {
                quickResults.errors.push({ name: 'Falta declaraci√≥n de idioma' });
            }
            
            if (images.length === 0) {
                quickResults.passed.push({ name: 'Todas las im√°genes tienen alt' });
                passed++;
            } else {
                quickResults.errors.push({ name: `${images.length} im√°genes sin alt` });
            }
            
            if (unlabeledInputs.length === 0) {
                quickResults.passed.push({ name: 'Inputs tienen etiquetas' });
                passed++;
            } else {
                quickResults.errors.push({ name: `${unlabeledInputs.length} inputs sin etiqueta` });
            }
            
            if (skipLinks.length > 0) {
                quickResults.passed.push({ name: 'Skip links disponibles' });
                passed++;
            } else {
                quickResults.warnings.push({ name: 'No se encontraron skip links' });
            }
            
            quickResults.score = Math.round((passed / total) * 100);
            
            updateDisplay(quickResults);
            log(`‚ö° Escaneo r√°pido completado: ${quickResults.score}%`);
        }

        function validateSpecificCriteria() {
            log('üéØ Validando criterios espec√≠ficos...');
            
            const criteria = [
                { id: '1.1.1', name: 'Contenido no textual' },
                { id: '2.4.1', name: 'Bloques de omisi√≥n' },
                { id: '2.4.7', name: 'Foco visible' },
                { id: '3.1.1', name: 'Idioma de p√°gina' }
            ];
            
            criteria.forEach(criterion => {
                setTimeout(() => {
                    log(`Validando ${criterion.id}: ${criterion.name}...`);
                }, Math.random() * 1000);
            });
        }

        function runKeyboardTest() {
            log('‚å®Ô∏è Iniciando test de navegaci√≥n por teclado...');
            
            const focusableElements = window.accessibilityAPI.findFocusable();
            log(`Encontrados ${focusableElements.length} elementos focusables`);
            
            // Destacar elementos focusables
            focusableElements.forEach((el, index) => {
                el.style.outline = '2px dashed var(--color-info)';
                setTimeout(() => {
                    el.style.outline = '';
                }, 3000);
            });
            
            window.accessibilityAPI.announce(
                `Test de teclado iniciado. ${focusableElements.length} elementos encontrados`,
                'polite'
            );
        }

        function toggleDebugMode() {
            const isDebugMode = document.body.classList.contains('accessibility-debug-mode');
            
            if (isDebugMode) {
                window.accessibilityAPI.disableDebug();
                log('üîß Modo debug desactivado');
            } else {
                window.accessibilityAPI.enableDebug();
                log('üîß Modo debug activado - elementos resaltados');
            }
        }

        function highlightAccessibilityIssues() {
            log('üé® Resaltando problemas de accesibilidad...');
            
            // Resaltar im√°genes sin alt
            const imagesNoAlt = document.querySelectorAll('img:not([alt])');
            imagesNoAlt.forEach(img => {
                img.style.border = '3px solid var(--color-error)';
                img.title = 'ERROR: Falta atributo alt';
            });
            
            // Resaltar inputs sin etiqueta
            const unlabeledInputs = document.querySelectorAll('input:not([aria-label]):not([aria-labelledby])');
            unlabeledInputs.forEach(input => {
                if (!input.id || !document.querySelector(`label[for="${input.id}"]`)) {
                    input.style.border = '3px solid var(--color-warning)';
                }
            });
            
            // Resaltar botones sin texto
            const unlabeledButtons = document.querySelectorAll('button:not([aria-label]):empty');
            unlabeledButtons.forEach(btn => {
                btn.style.border = '3px solid var(--color-error)';
            });
            
            log(`üé® Problemas resaltados: ${imagesNoAlt.length + unlabeledInputs.length + unlabeledButtons.length} encontrados`);
        }

        function simulateScreenReader() {
            log('üì¢ Simulando anuncios de lector de pantalla...');
            
            const announcements = [
                'Navegando por p√°gina de accesibilidad',
                'Regi√≥n principal, contenido',
                'Encabezado nivel 1: Test de accesibilidad',
                'Bot√≥n: Ejecutar validaci√≥n completa'
            ];
            
            announcements.forEach((text, index) => {
                setTimeout(() => {
                    window.accessibilityAPI.announce(text, 'polite');
                    log(`üì¢ Anunciado: "${text}"`);
                }, index * 1500);
            });
        }

        function clearResults() {
            validationResults = null;
            logEntries = [];
            
            document.getElementById('resultsLog').textContent = 'Log limpiado - esperando nueva validaci√≥n...';
            document.getElementById('scoreValue').textContent = '0%';
            document.getElementById('scoreCircle').className = 'score-circle';
            document.getElementById('scoreDescription').textContent = 'Ejecuta la validaci√≥n para ver los resultados';
            
            // Limpiar estad√≠sticas
            document.getElementById('passedCriteria').textContent = '0';
            document.getElementById('failedCriteria').textContent = '0';
            document.getElementById('warningCriteria').textContent = '0';
            
            // Limpiar criterios
            document.getElementById('levelACriteria').innerHTML = '';
            document.getElementById('levelAACriteria').innerHTML = '';
            
            log('üóëÔ∏è Resultados limpiados');
        }

        function exportResults() {
            if (!validationResults) {
                log('‚ùå No hay resultados para exportar');
                return;
            }
            
            const exportData = {
                timestamp: new Date().toISOString(),
                score: validationResults.score,
                url: window.location.href,
                results: validationResults,
                log: logEntries
            };
            
            const blob = new Blob([JSON.stringify(exportData, null, 2)], { 
                type: 'application/json' 
            });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `accessibility-report-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            
            URL.revokeObjectURL(url);
            log('üìÑ Resultados exportados como JSON');
        }

        function updateDisplay(results) {
            // Actualizar puntuaci√≥n
            const scoreElement = document.getElementById('scoreValue');
            const scoreCircle = document.getElementById('scoreCircle');
            const scoreDescription = document.getElementById('scoreDescription');
            
            scoreElement.textContent = `${results.score}%`;
            
            // Actualizar clase de puntuaci√≥n
            scoreCircle.className = 'score-circle ' + getScoreClass(results.score);
            
            // Actualizar descripci√≥n
            scoreDescription.textContent = getScoreDescription(results.score);
            
            // Actualizar estad√≠sticas
            const passed = results.passed ? results.passed.length : 0;
            const errors = results.errors ? results.errors.length : 0;
            const warnings = results.warnings ? results.warnings.length : 0;
            
            document.getElementById('passedCriteria').textContent = passed;
            document.getElementById('failedCriteria').textContent = errors;
            document.getElementById('warningCriteria').textContent = warnings;
            
            // Actualizar criterios nivel A
            updateCriteriaDisplay('levelACriteria', results.level_A || []);
            
            // Actualizar criterios nivel AA
            updateCriteriaDisplay('levelAACriteria', results.level_AA || []);
        }

        function updateCriteriaDisplay(containerId, criteria) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            criteria.forEach(criterion => {
                const card = document.createElement('div');
                card.className = `criteria-card ${criterion.passed ? 'passed' : 'failed'}`;
                
                card.innerHTML = `
                    <h4>${criterion.criterion || 'N/A'} - ${criterion.name}</h4>
                    <p><strong>Estado:</strong> ${criterion.passed ? '‚úÖ Aprobado' : '‚ùå Fallido'}</p>
                    <p><strong>Nivel:</strong> ${criterion.level}</p>
                    ${criterion.issues && criterion.issues.length > 0 ? 
                        `<p><strong>Problemas:</strong></p><ul>${criterion.issues.map(issue => `<li>${issue}</li>`).join('')}</ul>` 
                        : ''}
                `;
                
                container.appendChild(card);
            });
        }

        function updateManualChecklist() {
            if (!validationResults) return;
            
            const checklistItems = document.querySelectorAll('#manualChecklist li');
            const passedCount = validationResults.passed ? validationResults.passed.length : 0;
            const totalCriteria = 10;
            
            checklistItems.forEach((item, index) => {
                const icon = item.querySelector('.status-icon');
                
                if (index < passedCount) {
                    item.className = 'passed';
                    icon.textContent = '‚úÖ';
                } else if (validationResults.errors && index < passedCount + validationResults.errors.length) {
                    item.className = 'failed';
                    icon.textContent = '‚ùå';
                } else {
                    item.className = 'warning';
                    icon.textContent = '‚ö†Ô∏è';
                }
            });
        }

        function getScoreClass(score) {
            if (score >= 90) return 'excellent';
            if (score >= 75) return 'good';
            if (score >= 50) return 'poor';
            return 'fail';
        }

        function getScoreDescription(score) {
            if (score >= 90) return 'üéâ Excelente cumplimiento WCAG 2.1 AA';
            if (score >= 75) return 'üëç Buen cumplimiento, pocas mejoras necesarias';
            if (score >= 50) return '‚ö†Ô∏è Cumplimiento parcial, mejoras requeridas';
            return '‚ùå Cumplimiento deficiente, acci√≥n inmediata necesaria';
        }

        function setupInitialDisplay() {
            // Mostrar criterios base
            const baseCriteria = [
                { criterion: '1.1.1', name: 'Contenido no textual', level: 'A', passed: false },
                { criterion: '1.3.1', name: 'Informaci√≥n y relaciones', level: 'A', passed: false },
                { criterion: '2.1.1', name: 'Teclado', level: 'A', passed: false },
                { criterion: '2.4.1', name: 'Bloques de omisi√≥n', level: 'A', passed: false },
                { criterion: '3.1.1', name: 'Idioma de la p√°gina', level: 'A', passed: false }
            ];
            
            const aaCriteria = [
                { criterion: '1.4.3', name: 'Contraste (M√≠nimo)', level: 'AA', passed: false },
                { criterion: '2.4.6', name: 'Encabezados y etiquetas', level: 'AA', passed: false },
                { criterion: '2.4.7', name: 'Foco visible', level: 'AA', passed: false }
            ];
            
            updateCriteriaDisplay('levelACriteria', baseCriteria);
            updateCriteriaDisplay('levelAACriteria', aaCriteria);
        }

        function clearLog() {
            logEntries = [];
            document.getElementById('resultsLog').textContent = 'Log limpiado - esperando nueva validaci√≥n...';
        }

        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}`;
            
            logEntries.push(logEntry);
            
            const logElement = document.getElementById('resultsLog');
            logElement.textContent = logEntries.join('\n');
            logElement.scrollTop = logElement.scrollHeight;
            
            console.log(logEntry);
        }

        // Event listeners para teclado
        document.addEventListener('keydown', function(e) {
            if (e.altKey) {
                switch(e.key) {
                    case '1':
                        runFullValidation();
                        e.preventDefault();
                        break;
                    case '2':
                        runQuickScan();
                        e.preventDefault();
                        break;
                    case '3':
                        toggleDebugMode();
                        e.preventDefault();
                        break;
                }
            }
        });
    </script>
</body>
</html>
